#!/usr/bin/env python3

from golosio_recommendation_model.model.predict.doc2vec import run_doc2vec
from golosio_recommendation_model.config import config
from daemons.prefab import run
import sys

class Doc2VecPredictDaemon(run.RunDaemon):
  def run(self):
    while True:
      run_doc2vec(config['database_url'], config['database_name'])

daemon = Doc2VecPredictDaemon(pidfile='/tmp/doc2vec_predict.pid')
if (sys.argv[1] == "start"):
  daemon.start()
elif (sys.argv[1] == "stop"):
  daemon.stop()